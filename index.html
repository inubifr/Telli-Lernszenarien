<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telli Szenario-Assistent</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --accent-color: #3498db;
            --bg-color: #f4f6f7;
            --card-bg: #ffffff;
            --text-color: #333;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }

        .container {
            background-color: var(--card-bg);
            padding: 40px;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
            transition: all 0.3s ease;
        }

        h1 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 1.8rem;
            text-align: center;
        }

        p.subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 30px;
        }

        .step {
            display: none; /* Alle Schritte standardmäßig ausblenden */
            animation: fadeIn 0.5s;
        }

        .step.active {
            display: block; /* Nur den aktiven Schritt anzeigen */
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }

        input[type="text"], 
        textarea, 
        select {
            width: 100%;
            padding: 12px;
            margin-bottom: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1rem;
            box-sizing: border-box;
            transition: border-color 0.3s;
        }

        input[type="text"]:focus, 
        textarea:focus, 
        select:focus {
            border-color: var(--accent-color);
            outline: none;
        }

        textarea {
            resize: vertical;
            min-height: 100px;
        }

        .btn-group {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-size: 1rem;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn-next {
            background-color: var(--accent-color);
            color: white;
            margin-left: auto;
        }

        .btn-next:hover {
            background-color: #2980b9;
        }

        .btn-back {
            background-color: #95a5a6;
            color: white;
        }

        .btn-back:hover {
            background-color: #7f8c8d;
        }

        /* Result Styles */
        .result-box {
            background-color: #ecf0f1;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 5px solid var(--accent-color);
            position: relative;
        }

        .result-label {
            font-size: 0.85rem;
            text-transform: uppercase;
            color: #7f8c8d;
            margin-bottom: 5px;
            font-weight: bold;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 5px 10px;
            font-size: 0.8rem;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .copy-btn:hover {
            background-color: #eee;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .progress-bar {
            height: 6px;
            background-color: #eee;
            border-radius: 3px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--accent-color);
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Telli Szenario-Assistent</h1>
    <p class="subtitle">Ich helfe dir, die Felder für dein Lernszenario auszufüllen.</p>
    
    <div class="progress-bar">
        <div class="progress-fill" id="progress"></div>
    </div>

    <form id="wizardForm" onsubmit="return false;">
        
        <!-- Schritt 1: Basisdaten -->
        <div class="step active" id="step1">
            <label for="topic">Thema der Unterrichtseinheit</label>
            <input type="text" id="topic" placeholder="z.B. Die Französische Revolution, Photosynthese, Faust I">
            
            <label for="grade">Klassenstufe</label>
            <input type="text" id="grade" placeholder="z.B. 9. Klasse">
            
            <label for="subject">Fach</label>
            <input type="text" id="subject" placeholder="z.B. Geschichte, Biologie, Deutsch">

            <div class="btn-group">
                <button class="btn-next" onclick="nextStep(2)">Weiter</button>
            </div>
        </div>

        <!-- Schritt 2: Lernziele -->
        <div class="step" id="step2">
            <label for="goal">Was ist das Lernziel?</label>
            <textarea id="goal" placeholder="Was sollen die Schüler am Ende verstanden haben? z.B. Die Ursachen der Revolution verstehen und kritisch bewerten."></textarea>

            <div class="btn-group">
                <button class="btn-back" onclick="prevStep(1)">Zurück</button>
                <button class="btn-next" onclick="nextStep(3)">Weiter</button>
            </div>
        </div>

        <!-- Schritt 3: Die Rolle der KI -->
        <div class="step" id="step3">
            <label for="role">Welche Rolle soll die KI (Telli) einnehmen?</label>
            <select id="role">
                <option value="tutor">Sokratischer Tutor (stellt Rückfragen, gibt keine Lösungen)</option>
                <option value="expert">Experte (erklärt Dinge einfach und verständlich)</option>
                <option value="character">Historische/Fiktive Figur (Rollenspiel)</option>
                <option value="debater">Debattierpartner (vertritt eine Gegenposition)</option>
                <option value="quizmaster">Quizmaster (prüft Wissen ab)</option>
            </select>

            <label for="characterName" id="charLabel" style="display:none; margin-top:15px;">Welche Figur genau?</label>
            <input type="text" id="characterName" style="display:none;" placeholder="z.B. Napoleon, Goethe, Ein Mitochondrium">

            <div class="btn-group">
                <button class="btn-back" onclick="prevStep(2)">Zurück</button>
                <button class="btn-next" onclick="generateResult()">Fertigstellen</button>
            </div>
        </div>

        <!-- Schritt 4: Ergebnis -->
        <div class="step" id="step4">
            <h3>Hier sind deine Texte für Telli!</h3>
            <p>Kopiere die Inhalte einfach in die entsprechenden Felder.</p>

            <div class="result-box">
                <div class="result-label">Feld: Wie heißt das Szenario?</div>
                <button class="copy-btn" onclick="copyToClipboard('res-title')">Kopieren</button>
                <div id="res-title"></div>
            </div>

            <div class="result-box">
                <div class="result-label">Feld: Wie kann das Szenario kurz beschrieben werden?</div>
                <button class="copy-btn" onclick="copyToClipboard('res-desc')">Kopieren</button>
                <div id="res-desc"></div>
            </div>

            <div class="result-box">
                <div class="result-label">Feld: Wie lautet der Auftrag an die Lernenden?</div>
                <button class="copy-btn" onclick="copyToClipboard('res-task')">Kopieren</button>
                <div id="res-task"></div>
            </div>

            <div class="result-box">
                <div class="result-label">Feld: Wie verhält sich telli? (System Prompt)</div>
                <button class="copy-btn" onclick="copyToClipboard('res-prompt')">Kopieren</button>
                <div id="res-prompt" style="white-space: pre-wrap;"></div>
            </div>

            <div class="btn-group">
                <button class="btn-back" onclick="prevStep(3)">Bearbeiten</button>
                <button class="btn-next" onclick="location.reload()">Neues Szenario</button>
            </div>
        </div>

    </form>
</div>

<script>
    let currentStep = 1;
    const totalSteps = 4;

    // Event Listener für Rollenauswahl
    document.getElementById('role').addEventListener('change', function() {
        const charInput = document.getElementById('characterName');
        const charLabel = document.getElementById('charLabel');
        if(this.value === 'character') {
            charInput.style.display = 'block';
            charLabel.style.display = 'block';
        } else {
            charInput.style.display = 'none';
            charLabel.style.display = 'none';
        }
    });

    function updateProgress() {
        const percent = ((currentStep - 1) / (totalSteps - 1)) * 100;
        document.getElementById('progress').style.width = percent + '%';
    }

    function showStep(stepNumber) {
        // Alle Schritte ausblenden
        document.querySelectorAll('.step').forEach(el => el.classList.remove('active'));
        // Gewünschten Schritt anzeigen
        document.getElementById('step' + stepNumber).classList.add('active');
        currentStep = stepNumber;
        updateProgress();
    }

    function nextStep(targetStep) {
        // Validierung (sehr einfach)
        if (currentStep === 1) {
            if (!document.getElementById('topic').value) {
                alert("Bitte gib ein Thema ein.");
                return;
            }
        }
        showStep(targetStep);
    }

    function prevStep(targetStep) {
        showStep(targetStep);
    }

    function generateResult() {
        // Daten sammeln
        const topic = document.getElementById('topic').value;
        const grade = document.getElementById('grade').value;
        const subject = document.getElementById('subject').value;
        const goal = document.getElementById('goal').value;
        const roleType = document.getElementById('role').value;
        const charName = document.getElementById('characterName').value;

        // 1. Titel Generierung
        let title = `${topic} entdecken`;
        if(roleType === 'character' && charName) {
            title = `Im Gespräch mit ${charName}: ${topic}`;
        } else if (roleType === 'quizmaster') {
            title = `Quiz-Challenge: ${topic}`;
        } else if (roleType === 'debater') {
            title = `Debatte: ${topic}`;
        }
        document.getElementById('res-title').innerText = title;

        // 2. Beschreibung Generierung
        document.getElementById('res-desc').innerText = `Ein interaktives Lernszenario für das Fach ${subject} (Klasse ${grade}). Die Schüler setzen sich mit dem Thema "${topic}" auseinander, um folgendes Ziel zu erreichen: ${goal}.`;

        // 3. Auftrag an Lernende Generierung
        let task = "";
        if(roleType === 'tutor') {
            task = `Begrüße Telli. Telli wird dir helfen, das Thema "${topic}" zu verstehen. Beantworte die Fragen, die Telli dir stellt.`;
        } else if (roleType === 'character') {
            task = `Du sprichst jetzt mit ${charName}. Führe ein Interview, um mehr über "${topic}" zu erfahren.`;
        } else if (roleType === 'debater') {
            task = `Telli ist anderer Meinung als du beim Thema "${topic}". Versuche, Telli mit guten Argumenten zu überzeugen.`;
        } else {
            task = `Starte das Gespräch mit "Hallo". Bearbeite das Thema "${topic}" gemeinsam mit der KI.`;
        }
        document.getElementById('res-task').innerText = task;

        // 4. System Prompt Generierung (Das Herzstück)
        let prompt = `Du bist ein KI-Lernbegleiter namens "telli" in einem Schulszenario.\n`;
        prompt += `Zielgruppe: ${grade}, Fach: ${subject}.\n`;
        prompt += `Thema: ${topic}.\n`;
        prompt += `Lernziel: ${goal}.\n\n`;

        prompt += `DEINE ROLLE:\n`;
        
        switch(roleType) {
            case 'tutor':
                prompt += `- Du agierst als sokratischer Tutor.\n- Gib NIEMALS die Lösung direkt vor.\n- Stelle Rückfragen, um den Schüler zur Lösung zu führen.\n- Sei geduldig und ermutigend.`;
                break;
            case 'expert':
                prompt += `- Du bist ein Experte auf diesem Gebiet.\n- Erkläre Sachverhalte altersgerecht und verständlich.\n- Nutze Analogien und Beispiele.\n- Prüfe am Ende einer Erklärung, ob der Schüler es verstanden hat.`;
                break;
            case 'character':
                prompt += `- Du bist ${charName}.\n- Bleibe strikt in dieser Rolle (First-Person-Perspektive).\n- Nutze Sprache und Wissen, die zu dieser Figur passen.\n- Wenn der Schüler dich nach modernen Dingen fragt, reagiere verwirrt (sofern historisch).`;
                break;
            case 'debater':
                prompt += `- Du vertrittst eine kontroverse Gegenposition zum Thema.\n- Fordere die Argumente des Schülers heraus.\n- Sei höflich, aber bestimmt in der Sache.\n- Ziel ist es, die Argumentationsfähigkeit des Schülers zu trainieren.`;
                break;
            case 'quizmaster':
                prompt += `- Du bist ein Quizmaster.\n- Stelle nacheinander 5 Fragen zum Thema.\n- Warte nach jeder Frage auf die Antwort.\n- Gib Feedback (Richtig/Falsch) und erkläre kurz, warum.\n- Zähle die Punkte mit.`;
                break;
        }

        prompt += `\n\nVerhalte dich sicher und pädagogisch wertvoll. Vermeide unangemessene Inhalte.`;

        document.getElementById('res-prompt').innerText = prompt;

        showStep(4);
    }

    function copyToClipboard(elementId) {
        const text = document.getElementById(elementId).innerText;
        navigator.clipboard.writeText(text).then(() => {
            alert("Text kopiert!");
        }).catch(err => {
            console.error('Fehler beim Kopieren: ', err);
        });
    }
</script>

</body>
</html>
